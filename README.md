# Тестовый Keycloak проект

## Введение

Этот проект представляет собой тестовую реализацию аутентификации и авторизации с использованием Keycloak в Node.js
приложении на базе фреймворка Fastify.

## Начало работы

### Предварительные условия

- Установленный Node.js
- Установленный и настроенный сервер Keycloak
- Понимание основ REST API и OAuth 2.0

### Установка

1. Клонируйте репозиторий:

```bash
git clone https://github.com/LinnikDanil/keycloak-test
```

2. Установите зависимости:

```bash
npm install
```

### Конфигурация Keycloak

Настройте ваш Keycloak сервер и получите `clientId` и `clientSecret` для вашего клиента. Эти данные потребуются для
конфигурации проекта.

### Настройка проекта

Измените файл `config.ts` в соответствии с вашими параметрами подключения к Keycloak.

### Запуск сервера

Запустите сервер командой:

```bash
npm start
```

После запуска сервер будет доступен по адресу `http://localhost:3000`.

## API Endpoints

- `POST /login` - Вход пользователя.
- `POST /refresh` - Обновление токенов.
- `POST /logout` - Выход пользователя.
- `GET /test` - Тестовый эндпоинт без защиты.
- `GET /test-user` - Тестовый эндпоинт для роли "user".
- `GET /test-admin` - Тестовый эндпоинт для роли "admin".

## Сессии

Сессии управляются через куки, для чего используется плагин `@fastify/secure-session`.

## Тестирование

Тестирование можно проводить с помощью Postman или любого другого инструмента, который позволяет отправлять HTTP
запросы.